---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.0
  name: disasterrecoveryplans.nephoran.com
spec:
  group: nephoran.com
  names:
    kind: DisasterRecoveryPlan
    listKind: DisasterRecoveryPlanList
    plural: disasterrecoveryplans
    shortNames:
    - drp
    - drplan
    singular: disasterrecoveryplan
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.planType
      name: Type
      type: string
    - jsonPath: .status.phase
      name: Status
      type: string
    - jsonPath: .spec.rtoTarget
      name: RTO Target
      type: string
    - jsonPath: .spec.rpoTarget
      name: RPO Target
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: DisasterRecoveryPlan defines a comprehensive disaster recovery
          plan
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: DisasterRecoveryPlanSpec defines the desired state of DisasterRecoveryPlan
            properties:
              automationConfig:
                description: Automation settings
                properties:
                  approvalConfig:
                    description: Approval requirements for automatic recovery
                    properties:
                      approvalTimeout:
                        default: 30m
                        description: Approval timeout
                        pattern: ^[0-9]+(h|m|s)$
                        type: string
                      approvers:
                        description: List of approvers (users or groups)
                        items:
                          type: string
                        type: array
                      requireApproval:
                        default: true
                        description: Require manual approval before execution
                        type: boolean
                      requiredApprovals:
                        default: 1
                        description: Number of approvals required
                        format: int32
                        minimum: 1
                        type: integer
                    type: object
                  automaticRecovery:
                    default: false
                    description: Enable automatic disaster recovery
                    type: boolean
                  cooldownPeriod:
                    default: 10m
                    description: Cooldown period between recovery attempts
                    pattern: ^[0-9]+(h|m|s)$
                    type: string
                  maxRetries:
                    default: 3
                    description: Maximum number of automatic recovery attempts
                    format: int32
                    maximum: 10
                    minimum: 1
                    type: integer
                  triggerConditions:
                    description: Conditions that trigger automatic recovery
                    items:
                      description: DRTriggerCondition defines conditions that trigger
                        disaster recovery
                      properties:
                        component:
                          description: Component name (for component-failure type)
                          type: string
                        schedule:
                          description: Schedule configuration (for scheduled type)
                          pattern: ^[0-9*\-/,]+\s+[0-9*\-/,]+\s+[0-9*\-/,]+\s+[0-9*\-/,]+\s+[0-9*\-/,]+$
                          type: string
                        threshold:
                          description: Threshold configuration (for resource-threshold
                            type)
                          properties:
                            duration:
                              default: 5m
                              description: Duration the condition must persist
                              pattern: ^[0-9]+(h|m|s)$
                              type: string
                            metric:
                              description: Metric name to monitor
                              type: string
                            operator:
                              description: Operator for comparison
                              enum:
                              - gt
                              - gte
                              - lt
                              - lte
                              - eq
                              - ne
                              type: string
                            value:
                              description: Threshold value
                              type: string
                          required:
                          - metric
                          - operator
                          - value
                          type: object
                        type:
                          description: Type of trigger condition
                          enum:
                          - component-failure
                          - resource-threshold
                          - manual
                          - scheduled
                          type: string
                      required:
                      - type
                      type: object
                    type: array
                type: object
              backupConfig:
                description: Backup configuration
                properties:
                  backupTypes:
                    description: Types of backups to perform
                    items:
                      type: string
                    minItems: 1
                    type: array
                  components:
                    description: Components to include in backup
                    items:
                      description: TargetComponent defines a component targeted for
                        disaster recovery
                      properties:
                        dependencies:
                          description: Dependencies on other components
                          items:
                            type: string
                          type: array
                        labelSelector:
                          additionalProperties:
                            type: string
                          description: Label selector for the component
                          type: object
                        name:
                          description: Name of the component
                          type: string
                        namespace:
                          description: Namespace of the component
                          type: string
                        type:
                          description: Type of component (deployment, statefulset,
                            etc.)
                          enum:
                          - deployment
                          - statefulset
                          - service
                          - configmap
                          - secret
                          - pvc
                          type: string
                      required:
                      - name
                      - type
                      type: object
                    type: array
                  compression:
                    description: Compression settings
                    properties:
                      algorithm:
                        default: gzip
                        description: Compression algorithm
                        enum:
                        - gzip
                        - lz4
                        - zstd
                        type: string
                      enabled:
                        default: true
                        description: Enable compression
                        type: boolean
                      level:
                        default: 6
                        description: Compression level (1-9 for gzip)
                        format: int32
                        maximum: 9
                        minimum: 1
                        type: integer
                    type: object
                  encryption:
                    description: Encryption configuration
                    properties:
                      algorithm:
                        default: AES-256
                        description: Encryption algorithm
                        enum:
                        - AES-256
                        - AES-128
                        type: string
                      enabled:
                        default: true
                        description: Enable encryption
                        type: boolean
                      keyRotationPolicy:
                        description: Key rotation policy
                        properties:
                          enabled:
                            default: false
                            description: Enable automatic key rotation
                            type: boolean
                          keepOldKeys:
                            default: 3
                            description: Number of old keys to keep
                            format: int32
                            minimum: 1
                            type: integer
                          rotationInterval:
                            default: 90d
                            description: Rotation interval
                            pattern: ^[0-9]+(d|w|m|y)$
                            type: string
                        type: object
                      keySecret:
                        description: Secret containing encryption key
                        type: string
                    type: object
                  namespaces:
                    description: Namespaces to backup
                    items:
                      type: string
                    type: array
                  paused:
                    default: false
                    description: Pause backup operations
                    type: boolean
                  resourceLimits:
                    description: Resource limits for backup operations
                    properties:
                      cpu:
                        anyOf:
                        - type: integer
                        - type: string
                        description: CPU limits
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      maxConcurrency:
                        default: 10
                        description: Maximum concurrent operations
                        format: int32
                        minimum: 1
                        type: integer
                      maxCpu:
                        anyOf:
                        - type: integer
                        - type: string
                        description: MaxCPU limits
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      maxMemory:
                        anyOf:
                        - type: integer
                        - type: string
                        description: MaxMemory limits
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      memory:
                        anyOf:
                        - type: integer
                        - type: string
                        description: Memory limits
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      networkBandwidth:
                        anyOf:
                        - type: integer
                        - type: string
                        description: Network bandwidth limits
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      storage:
                        anyOf:
                        - type: integer
                        - type: string
                        description: Storage limits
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                    type: object
                  retention:
                    description: Retention policy
                    properties:
                      dailyBackups:
                        default: 7
                        description: Number of daily backups to keep
                        format: int32
                        minimum: 1
                        type: integer
                      monthlyBackups:
                        default: 12
                        description: Number of monthly backups to keep
                        format: int32
                        minimum: 0
                        type: integer
                      weeklyBackups:
                        default: 4
                        description: Number of weekly backups to keep
                        format: int32
                        minimum: 0
                        type: integer
                      yearlyBackups:
                        description: Number of yearly backups to keep
                        format: int32
                        minimum: 0
                        type: integer
                    required:
                    - dailyBackups
                    type: object
                  schedule:
                    default: 0 2 * * *
                    description: Backup schedule in cron format
                    pattern: ^[0-9*\-/,]+\s+[0-9*\-/,]+\s+[0-9*\-/,]+\s+[0-9*\-/,]+\s+[0-9*\-/,]+$
                    type: string
                  storageConfig:
                    description: Storage configuration
                    properties:
                      config:
                        description: Additional configuration
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                      credentialsSecret:
                        description: Credentials secret name
                        type: string
                      location:
                        description: Storage bucket or path
                        type: string
                      provider:
                        description: Storage provider type
                        enum:
                        - s3
                        - gcs
                        - azure
                        - local
                        type: string
                      region:
                        description: Region for cloud storage
                        type: string
                      storageClass:
                        description: Storage class
                        type: string
                    required:
                    - location
                    - provider
                    type: object
                  validation:
                    description: Validation settings
                    properties:
                      checksumValidation:
                        default: true
                        description: Checksum validation
                        type: boolean
                      enabled:
                        default: true
                        description: Enable backup validation
                        type: boolean
                      restoreValidation:
                        default: false
                        description: Restore validation (test restore)
                        type: boolean
                      validationSchedule:
                        description: Validation schedule (separate from backup schedule)
                        type: string
                      validationTypes:
                        description: Validation types to perform
                        items:
                          type: string
                        type: array
                    type: object
                required:
                - retention
                - schedule
                - storageConfig
                type: object
              dependencies:
                description: Dependencies on other disaster recovery plans
                items:
                  type: string
                type: array
              description:
                description: Description of the disaster recovery plan
                type: string
              failoverConfig:
                description: Failover configuration
                properties:
                  autoFailover:
                    default: false
                    description: Enable automatic failover
                    type: boolean
                  components:
                    description: Components to include in failover
                    items:
                      description: TargetComponent defines a component targeted for
                        disaster recovery
                      properties:
                        dependencies:
                          description: Dependencies on other components
                          items:
                            type: string
                          type: array
                        labelSelector:
                          additionalProperties:
                            type: string
                          description: Label selector for the component
                          type: object
                        name:
                          description: Name of the component
                          type: string
                        namespace:
                          description: Namespace of the component
                          type: string
                        type:
                          description: Type of component (deployment, statefulset,
                            etc.)
                          enum:
                          - deployment
                          - statefulset
                          - service
                          - configmap
                          - secret
                          - pvc
                          type: string
                      required:
                      - name
                      - type
                      type: object
                    type: array
                  dataSyncConfig:
                    description: Data synchronization requirements
                    properties:
                      consistencyLevel:
                        default: eventual
                        description: Consistency level required
                        enum:
                        - eventual
                        - strong
                        - session
                        type: string
                      dataSources:
                        description: Data sources to synchronize
                        items:
                          description: FailoverDataSource defines a data source for
                            synchronization
                          properties:
                            name:
                              description: Data source name
                              type: string
                            regionalEndpoints:
                              additionalProperties:
                                type: string
                              description: Regional endpoints for the data source
                              type: object
                            syncConfig:
                              description: Custom synchronization configuration
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                            syncMethod:
                              default: async
                              description: Synchronization method
                              enum:
                              - async
                              - sync
                              - custom
                              type: string
                            type:
                              description: Data source type
                              enum:
                              - database
                              - storage
                              - cache
                              - custom
                              type: string
                          required:
                          - name
                          - regionalEndpoints
                          - type
                          type: object
                        type: array
                      enabled:
                        default: true
                        description: Enable data synchronization before failover
                        type: boolean
                      syncTimeout:
                        default: 5m
                        description: Synchronization timeout
                        pattern: ^[0-9]+(h|m|s)$
                        type: string
                    type: object
                  dnsConfig:
                    description: DNS failover configuration
                    properties:
                      credentialsSecret:
                        description: Credentials secret
                        type: string
                      provider:
                        description: DNS provider
                        enum:
                        - route53
                        - cloudflare
                        - external
                        type: string
                      records:
                        description: DNS records to manage
                        items:
                          description: FailoverDNSRecord defines a DNS record for
                            failover
                          properties:
                            healthCheck:
                              description: Health check configuration for this record
                              properties:
                                enabled:
                                  default: true
                                  description: Enable DNS health checking
                                  type: boolean
                                endpoint:
                                  description: Health check endpoint
                                  type: string
                                path:
                                  default: /healthz
                                  description: Path for HTTP(S) health checks
                                  type: string
                                port:
                                  default: 80
                                  description: Port for health check
                                  format: int32
                                  maximum: 65535
                                  minimum: 1
                                  type: integer
                                protocol:
                                  default: HTTP
                                  description: Protocol for health check
                                  enum:
                                  - HTTP
                                  - HTTPS
                                  - TCP
                                  type: string
                              required:
                              - endpoint
                              type: object
                            name:
                              description: Record name
                              type: string
                            regionalValues:
                              additionalProperties:
                                type: string
                              description: Regional values (region -> value mapping)
                              type: object
                            type:
                              description: Record type
                              enum:
                              - A
                              - AAAA
                              - CNAME
                              type: string
                          required:
                          - name
                          - regionalValues
                          - type
                          type: object
                        minItems: 1
                        type: array
                      ttl:
                        default: 300
                        description: TTL for DNS records
                        format: int32
                        minimum: 60
                        type: integer
                      zone:
                        description: Zone ID or domain name
                        type: string
                    required:
                    - provider
                    - records
                    - zone
                    type: object
                  failoverRegions:
                    description: Failover regions in order of preference
                    items:
                      type: string
                    minItems: 1
                    type: array
                  healthCheck:
                    description: Health check configuration
                    properties:
                      endpoints:
                        description: Endpoints to check
                        items:
                          type: string
                        minItems: 1
                        type: array
                      failureThreshold:
                        default: 3
                        description: Number of failed checks before triggering
                        format: int32
                        minimum: 1
                        type: integer
                      interval:
                        default: 30s
                        description: Check interval
                        pattern: ^[0-9]+(h|m|s)$
                        type: string
                      successThreshold:
                        default: 3
                        description: Number of successful checks to recover
                        format: int32
                        minimum: 1
                        type: integer
                      timeout:
                        default: 10s
                        description: Timeout for each check
                        pattern: ^[0-9]+(h|m|s)$
                        type: string
                    required:
                    - endpoints
                    type: object
                  primaryRegion:
                    description: Primary region
                    type: string
                  resourceConstraints:
                    description: Resource constraints for failover operations
                    properties:
                      cpu:
                        anyOf:
                        - type: integer
                        - type: string
                        description: CPU limits
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      maxConcurrency:
                        default: 10
                        description: Maximum concurrent operations
                        format: int32
                        minimum: 1
                        type: integer
                      maxCpu:
                        anyOf:
                        - type: integer
                        - type: string
                        description: MaxCPU limits
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      maxMemory:
                        anyOf:
                        - type: integer
                        - type: string
                        description: MaxMemory limits
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      memory:
                        anyOf:
                        - type: integer
                        - type: string
                        description: Memory limits
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      networkBandwidth:
                        anyOf:
                        - type: integer
                        - type: string
                        description: Network bandwidth limits
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      storage:
                        anyOf:
                        - type: integer
                        - type: string
                        description: Storage limits
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                    type: object
                  rollbackConfig:
                    description: Rollback configuration
                    properties:
                      autoRollback:
                        default: true
                        description: Enable automatic rollback on failure
                        type: boolean
                      dataRecovery:
                        description: Data recovery requirements
                        properties:
                          enabled:
                            default: true
                            description: Enable data recovery
                            type: boolean
                          recoveryTarget:
                            description: Point-in-time recovery target
                            pattern: ^[0-9]+(h|m|s)$
                            type: string
                          validation:
                            description: Recovery validation
                            properties:
                              checks:
                                description: Validation checks
                                items:
                                  type: string
                                type: array
                              enabled:
                                default: true
                                description: Enable validation
                                type: boolean
                              timeout:
                                default: 5m
                                description: Validation timeout
                                pattern: ^[0-9]+(h|m|s)$
                                type: string
                            type: object
                        type: object
                      rollbackTimeout:
                        default: 10m
                        description: Rollback timeout
                        pattern: ^[0-9]+(h|m|s)$
                        type: string
                      triggerConditions:
                        description: Rollback trigger conditions
                        items:
                          description: FailoverTriggerCondition defines conditions
                            that trigger failover
                          properties:
                            cooldown:
                              default: 10m
                              description: Cooldown period after triggering
                              pattern: ^[0-9]+(h|m|s)$
                              type: string
                            healthCheckConfig:
                              description: Health check configuration (for health-check
                                type)
                              properties:
                                endpoints:
                                  description: Endpoints to check
                                  items:
                                    type: string
                                  minItems: 1
                                  type: array
                                failureThreshold:
                                  default: 3
                                  description: Number of failed checks before triggering
                                  format: int32
                                  minimum: 1
                                  type: integer
                                interval:
                                  default: 30s
                                  description: Check interval
                                  pattern: ^[0-9]+(h|m|s)$
                                  type: string
                                successThreshold:
                                  default: 3
                                  description: Number of successful checks to recover
                                  format: int32
                                  minimum: 1
                                  type: integer
                                timeout:
                                  default: 10s
                                  description: Timeout for each check
                                  pattern: ^[0-9]+(h|m|s)$
                                  type: string
                              required:
                              - endpoints
                              type: object
                            metricThreshold:
                              description: Metric threshold configuration (for metric-threshold
                                type)
                              properties:
                                duration:
                                  default: 5m
                                  description: Duration the condition must persist
                                  pattern: ^[0-9]+(h|m|s)$
                                  type: string
                                metricName:
                                  description: Metric name
                                  type: string
                                operator:
                                  description: Comparison operator
                                  enum:
                                  - gt
                                  - gte
                                  - lt
                                  - lte
                                  - eq
                                  - ne
                                  type: string
                                query:
                                  description: Metric query
                                  type: string
                                threshold:
                                  description: Threshold value
                                  type: string
                              required:
                              - metricName
                              - operator
                              - query
                              - threshold
                              type: object
                            name:
                              description: Condition name
                              type: string
                            severity:
                              default: medium
                              description: Severity level
                              enum:
                              - low
                              - medium
                              - high
                              - critical
                              type: string
                            type:
                              description: Condition type
                              enum:
                              - health-check
                              - metric-threshold
                              - manual
                              - external
                              type: string
                            webhookConfig:
                              description: External webhook configuration (for external
                                type)
                              properties:
                                body:
                                  description: Request body template
                                  type: string
                                expectedCodes:
                                  description: Expected response codes for success
                                  items:
                                    format: int32
                                    type: integer
                                  type: array
                                headers:
                                  additionalProperties:
                                    type: string
                                  description: Request headers
                                  type: object
                                method:
                                  default: POST
                                  description: HTTP method
                                  enum:
                                  - GET
                                  - POST
                                  - PUT
                                  type: string
                                timeout:
                                  default: 30s
                                  description: Timeout for webhook call
                                  pattern: ^[0-9]+(h|m|s)$
                                  type: string
                                url:
                                  description: Webhook URL
                                  type: string
                              required:
                              - url
                              type: object
                          required:
                          - name
                          - type
                          type: object
                        type: array
                    type: object
                  rtoTarget:
                    default: 1h
                    description: RTO target for failover
                    pattern: ^[0-9]+(h|m|s)$
                    type: string
                  trafficConfig:
                    description: Traffic splitting configuration
                    properties:
                      canaryConfig:
                        description: Canary failover configuration
                        properties:
                          autoPromote:
                            default: false
                            description: Automatic promotion if criteria are met
                            type: boolean
                          canaryPercentage:
                            default: 10
                            description: Canary traffic percentage
                            format: int32
                            maximum: 50
                            minimum: 1
                            type: integer
                          duration:
                            description: Duration of canary phase
                            pattern: ^[0-9]+(h|m|s)$
                            type: string
                          successCriteria:
                            description: Success criteria for promoting canary
                            items:
                              description: FailoverSuccessCriterion defines success
                                criteria for failover phases
                              properties:
                                metric:
                                  description: Metric to evaluate
                                  type: string
                                name:
                                  description: Criterion name
                                  type: string
                                operator:
                                  description: Comparison operator
                                  enum:
                                  - gt
                                  - gte
                                  - lt
                                  - lte
                                  - eq
                                  - ne
                                  type: string
                                threshold:
                                  description: Threshold for success
                                  type: string
                              required:
                              - metric
                              - name
                              - operator
                              - threshold
                              type: object
                            type: array
                        required:
                        - canaryPercentage
                        - duration
                        type: object
                      gradualConfig:
                        description: Gradual failover configuration
                        properties:
                          stepDuration:
                            description: Duration between steps
                            pattern: ^[0-9]+(h|m|s)$
                            type: string
                          steps:
                            description: Traffic shift steps (percentages)
                            items:
                              format: int32
                              type: integer
                            minItems: 1
                            type: array
                          successCriteria:
                            description: Success criteria to proceed to next step
                            items:
                              description: FailoverSuccessCriterion defines success
                                criteria for failover phases
                              properties:
                                metric:
                                  description: Metric to evaluate
                                  type: string
                                name:
                                  description: Criterion name
                                  type: string
                                operator:
                                  description: Comparison operator
                                  enum:
                                  - gt
                                  - gte
                                  - lt
                                  - lte
                                  - eq
                                  - ne
                                  type: string
                                threshold:
                                  description: Threshold for success
                                  type: string
                              required:
                              - metric
                              - name
                              - operator
                              - threshold
                              type: object
                            type: array
                        required:
                        - stepDuration
                        - steps
                        type: object
                      loadBalancerConfig:
                        description: Load balancer configuration
                        properties:
                          configTemplate:
                            description: Configuration template
                            type: string
                          healthCheck:
                            description: Health check configuration
                            properties:
                              endpoints:
                                description: Endpoints to check
                                items:
                                  type: string
                                minItems: 1
                                type: array
                              failureThreshold:
                                default: 3
                                description: Number of failed checks before triggering
                                format: int32
                                minimum: 1
                                type: integer
                              interval:
                                default: 30s
                                description: Check interval
                                pattern: ^[0-9]+(h|m|s)$
                                type: string
                              successThreshold:
                                default: 3
                                description: Number of successful checks to recover
                                format: int32
                                minimum: 1
                                type: integer
                              timeout:
                                default: 10s
                                description: Timeout for each check
                                pattern: ^[0-9]+(h|m|s)$
                                type: string
                            required:
                            - endpoints
                            type: object
                          type:
                            description: Load balancer type
                            enum:
                            - nginx
                            - haproxy
                            - envoy
                            - aws-alb
                            - gcp-lb
                            - azure-lb
                            type: string
                        required:
                        - type
                        type: object
                      mode:
                        default: immediate
                        description: Traffic splitting mode
                        enum:
                        - immediate
                        - gradual
                        - canary
                        type: string
                    type: object
                  triggerConditions:
                    description: Failover trigger conditions
                    items:
                      description: FailoverTriggerCondition defines conditions that
                        trigger failover
                      properties:
                        cooldown:
                          default: 10m
                          description: Cooldown period after triggering
                          pattern: ^[0-9]+(h|m|s)$
                          type: string
                        healthCheckConfig:
                          description: Health check configuration (for health-check
                            type)
                          properties:
                            endpoints:
                              description: Endpoints to check
                              items:
                                type: string
                              minItems: 1
                              type: array
                            failureThreshold:
                              default: 3
                              description: Number of failed checks before triggering
                              format: int32
                              minimum: 1
                              type: integer
                            interval:
                              default: 30s
                              description: Check interval
                              pattern: ^[0-9]+(h|m|s)$
                              type: string
                            successThreshold:
                              default: 3
                              description: Number of successful checks to recover
                              format: int32
                              minimum: 1
                              type: integer
                            timeout:
                              default: 10s
                              description: Timeout for each check
                              pattern: ^[0-9]+(h|m|s)$
                              type: string
                          required:
                          - endpoints
                          type: object
                        metricThreshold:
                          description: Metric threshold configuration (for metric-threshold
                            type)
                          properties:
                            duration:
                              default: 5m
                              description: Duration the condition must persist
                              pattern: ^[0-9]+(h|m|s)$
                              type: string
                            metricName:
                              description: Metric name
                              type: string
                            operator:
                              description: Comparison operator
                              enum:
                              - gt
                              - gte
                              - lt
                              - lte
                              - eq
                              - ne
                              type: string
                            query:
                              description: Metric query
                              type: string
                            threshold:
                              description: Threshold value
                              type: string
                          required:
                          - metricName
                          - operator
                          - query
                          - threshold
                          type: object
                        name:
                          description: Condition name
                          type: string
                        severity:
                          default: medium
                          description: Severity level
                          enum:
                          - low
                          - medium
                          - high
                          - critical
                          type: string
                        type:
                          description: Condition type
                          enum:
                          - health-check
                          - metric-threshold
                          - manual
                          - external
                          type: string
                        webhookConfig:
                          description: External webhook configuration (for external
                            type)
                          properties:
                            body:
                              description: Request body template
                              type: string
                            expectedCodes:
                              description: Expected response codes for success
                              items:
                                format: int32
                                type: integer
                              type: array
                            headers:
                              additionalProperties:
                                type: string
                              description: Request headers
                              type: object
                            method:
                              default: POST
                              description: HTTP method
                              enum:
                              - GET
                              - POST
                              - PUT
                              type: string
                            timeout:
                              default: 30s
                              description: Timeout for webhook call
                              pattern: ^[0-9]+(h|m|s)$
                              type: string
                            url:
                              description: Webhook URL
                              type: string
                          required:
                          - url
                          type: object
                      required:
                      - name
                      - type
                      type: object
                    type: array
                required:
                - failoverRegions
                - primaryRegion
                type: object
              notificationConfig:
                description: Notification configuration
                properties:
                  channels:
                    description: Notification channels
                    items:
                      description: DRNotificationChannel defines a notification channel
                      properties:
                        config:
                          description: Configuration for the notification channel
                          type: object
                          x-kubernetes-preserve-unknown-fields: true
                        name:
                          description: Name of the notification channel
                          type: string
                        severities:
                          description: Severity levels that trigger notifications
                          items:
                            type: string
                          type: array
                        type:
                          description: Type of notification channel
                          enum:
                          - email
                          - slack
                          - webhook
                          - sms
                          - pagerduty
                          type: string
                      required:
                      - config
                      - name
                      - type
                      type: object
                    type: array
                  enabled:
                    default: true
                    description: Enable notifications
                    type: boolean
                  events:
                    description: Events that trigger notifications
                    items:
                      type: string
                    type: array
                  template:
                    description: Notification template
                    type: string
                type: object
              planType:
                default: backup
                description: Type of disaster recovery plan
                enum:
                - backup
                - failover
                - full-recovery
                type: string
              priority:
                allOf:
                - enum:
                  - low
                  - medium
                  - high
                  - critical
                - enum:
                  - low
                  - medium
                  - high
                  - critical
                default: medium
                description: Priority level for disaster recovery execution
                type: string
              regions:
                description: Regions where this plan applies
                items:
                  type: string
                type: array
              resourceConstraints:
                description: Resource constraints for DR operations
                properties:
                  cpu:
                    anyOf:
                    - type: integer
                    - type: string
                    description: CPU limits
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                  maxConcurrency:
                    default: 10
                    description: Maximum concurrent operations
                    format: int32
                    minimum: 1
                    type: integer
                  maxCpu:
                    anyOf:
                    - type: integer
                    - type: string
                    description: MaxCPU limits
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                  maxMemory:
                    anyOf:
                    - type: integer
                    - type: string
                    description: MaxMemory limits
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                  memory:
                    anyOf:
                    - type: integer
                    - type: string
                    description: Memory limits
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                  networkBandwidth:
                    anyOf:
                    - type: integer
                    - type: string
                    description: Network bandwidth limits
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                  storage:
                    anyOf:
                    - type: integer
                    - type: string
                    description: Storage limits
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                type: object
              rpoTarget:
                default: 15m
                description: Recovery Point Objective - maximum acceptable data loss
                pattern: ^[0-9]+(h|m|s)$
                type: string
              rtoTarget:
                default: 1h
                description: Recovery Time Objective - maximum acceptable downtime
                pattern: ^[0-9]+(h|m|s)$
                type: string
              targetComponents:
                description: Target components for disaster recovery
                items:
                  description: TargetComponent defines a component targeted for disaster
                    recovery
                  properties:
                    dependencies:
                      description: Dependencies on other components
                      items:
                        type: string
                      type: array
                    labelSelector:
                      additionalProperties:
                        type: string
                      description: Label selector for the component
                      type: object
                    name:
                      description: Name of the component
                      type: string
                    namespace:
                      description: Namespace of the component
                      type: string
                    type:
                      description: Type of component (deployment, statefulset, etc.)
                      enum:
                      - deployment
                      - statefulset
                      - service
                      - configmap
                      - secret
                      - pvc
                      type: string
                  required:
                  - name
                  - type
                  type: object
                minItems: 1
                type: array
              testingConfig:
                description: Validation and testing configuration
                properties:
                  enableTesting:
                    default: false
                    description: Enable regular disaster recovery testing
                    type: boolean
                  testEnvironment:
                    description: Test environment configuration
                    properties:
                      cleanupPolicy:
                        default: on-success
                        description: Cleanup policy after testing
                        enum:
                        - always
                        - on-success
                        - never
                        type: string
                      isolated:
                        default: true
                        description: Use isolated environment for testing
                        type: boolean
                      namespace:
                        description: Namespace for testing
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                      resourceLimits:
                        description: Resource limits for test environment
                        properties:
                          cpu:
                            anyOf:
                            - type: integer
                            - type: string
                            description: CPU limits
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          maxConcurrency:
                            default: 10
                            description: Maximum concurrent operations
                            format: int32
                            minimum: 1
                            type: integer
                          maxCpu:
                            anyOf:
                            - type: integer
                            - type: string
                            description: MaxCPU limits
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          maxMemory:
                            anyOf:
                            - type: integer
                            - type: string
                            description: MaxMemory limits
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          memory:
                            anyOf:
                            - type: integer
                            - type: string
                            description: Memory limits
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          networkBandwidth:
                            anyOf:
                            - type: integer
                            - type: string
                            description: Network bandwidth limits
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          storage:
                            anyOf:
                            - type: integer
                            - type: string
                            description: Storage limits
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                        type: object
                    required:
                    - namespace
                    type: object
                  testSchedule:
                    description: Schedule for regular DR tests
                    pattern: ^[0-9*\-/,]+\s+[0-9*\-/,]+\s+[0-9*\-/,]+\s+[0-9*\-/,]+\s+[0-9*\-/,]+$
                    type: string
                  testTypes:
                    description: Types of tests to perform
                    items:
                      type: string
                    type: array
                  validationCriteria:
                    description: Validation criteria for DR tests
                    items:
                      description: DRValidationCriterion defines validation criteria
                        for DR operations
                      properties:
                        name:
                          description: Name of the validation criterion
                          type: string
                        parameters:
                          description: Validation parameters
                          type: object
                          x-kubernetes-preserve-unknown-fields: true
                        target:
                          description: Target for validation (component, service,
                            etc.)
                          type: string
                        timeout:
                          default: 5m
                          description: Timeout for validation
                          pattern: ^[0-9]+(h|m|s)$
                          type: string
                        type:
                          description: Type of validation
                          enum:
                          - health-check
                          - data-integrity
                          - performance
                          - functional
                          type: string
                      required:
                      - name
                      - type
                      type: object
                    type: array
                type: object
            required:
            - planType
            - rpoTarget
            - rtoTarget
            type: object
          status:
            description: DisasterRecoveryPlanStatus defines the observed state of
              DisasterRecoveryPlan
            properties:
              conditions:
                description: Conditions represent the latest available observations
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              failedExecutions:
                description: Number of failed executions
                format: int32
                type: integer
              lastExecution:
                description: Last execution details
                properties:
                  components:
                    description: Components involved in execution
                    items:
                      type: string
                    type: array
                  duration:
                    description: Duration of execution
                    type: string
                  endTime:
                    description: End time
                    format: date-time
                    type: string
                  error:
                    description: Error message if failed
                    type: string
                  id:
                    description: Execution ID
                    type: string
                  rtoAchieved:
                    description: RTO achieved (actual recovery time)
                    type: string
                  startTime:
                    description: Start time
                    format: date-time
                    type: string
                  status:
                    description: Execution status
                    enum:
                    - Running
                    - Completed
                    - Failed
                    - Cancelled
                    type: string
                  steps:
                    description: Detailed execution steps
                    items:
                      description: DRExecutionStep defines a step in DR plan execution
                      properties:
                        duration:
                          description: Duration
                          type: string
                        endTime:
                          description: End time
                          format: date-time
                          type: string
                        error:
                          description: Error message if failed
                          type: string
                        name:
                          description: Step name
                          type: string
                        startTime:
                          description: Start time
                          format: date-time
                          type: string
                        status:
                          description: Step status
                          enum:
                          - Pending
                          - Running
                          - Completed
                          - Failed
                          - Skipped
                          type: string
                      required:
                      - name
                      - startTime
                      - status
                      type: object
                    type: array
                required:
                - id
                - startTime
                - status
                type: object
              lastTestResults:
                description: Test results from the most recent DR test
                properties:
                  issues:
                    description: Issues found during testing
                    items:
                      type: string
                    type: array
                  rtoAchieved:
                    description: RTO achieved during test
                    type: string
                  status:
                    description: Overall test status
                    enum:
                    - Passed
                    - Failed
                    - Partial
                    type: string
                  testCases:
                    description: Individual test results
                    items:
                      description: DRTestCase defines a single test case result
                      properties:
                        duration:
                          description: Duration
                          type: string
                        error:
                          description: Error message if failed
                          type: string
                        name:
                          description: Test case name
                          type: string
                        status:
                          description: Test case status
                          enum:
                          - Passed
                          - Failed
                          - Skipped
                          type: string
                      required:
                      - name
                      - status
                      type: object
                    type: array
                  testId:
                    description: Test ID
                    type: string
                  timestamp:
                    description: Test timestamp
                    format: date-time
                    type: string
                required:
                - status
                - testId
                - timestamp
                type: object
              metrics:
                description: Current RTO and RPO metrics
                properties:
                  availability:
                    description: Availability percentage
                    format: int32
                    type: integer
                  averageRTO:
                    description: Average RTO over last executions
                    type: string
                  currentRPO:
                    description: Current RPO (time since last backup)
                    type: string
                  currentRTO:
                    description: Current RTO (based on last execution)
                    type: string
                  lastUpdated:
                    description: Last updated timestamp
                    format: date-time
                    type: string
                  successRate:
                    description: Success rate percentage
                    format: int32
                    type: integer
                type: object
              nextScheduledExecution:
                description: Next scheduled execution
                format: date-time
                type: string
              observedGeneration:
                description: Observed generation
                format: int64
                type: integer
              phase:
                description: Current phase of the disaster recovery plan
                enum:
                - Pending
                - Active
                - Testing
                - Failed
                - Suspended
                type: string
              successfulExecutions:
                description: Number of successful executions
                format: int32
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
