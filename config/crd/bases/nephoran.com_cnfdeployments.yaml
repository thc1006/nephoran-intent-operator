apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.0
  name: cnfdeployments.nephoran.com
spec:
  group: nephoran.com
  names:
    kind: CNFDeployment
    listKind: CNFDeploymentList
    plural: cnfdeployments
    shortNames:
    - cnfd
    - cnf
    singular: cnfdeployment
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.cnfType
      name: CNF Type
      type: string
    - jsonPath: .spec.function
      name: Function
      type: string
    - jsonPath: .spec.deploymentStrategy
      name: Strategy
      type: string
    - jsonPath: .spec.replicas
      name: Replicas
      type: integer
    - jsonPath: .status.readyReplicas
      name: Ready
      type: integer
    - jsonPath: .status.phase
      name: Phase
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: CNFDeployment is the Schema for the cnfdeployments API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.

              Servers should convert recognized schemas to the latest internal value,
              and

              may reject unrecognized values.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.

              Servers may infer this from the endpoint the client submits requests
              to.

              Cannot be updated.

              In CamelCase.

              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: CNFDeploymentSpec defines the desired state of CNFDeployment
            properties:
              autoScaling:
                description: Auto-scaling configuration
                properties:
                  cpuUtilization:
                    description: CPU utilization threshold for scaling
                    format: int32
                    maximum: 100
                    minimum: 1
                    type: integer
                  customMetrics:
                    description: Custom metrics for scaling
                    items:
                      description: CustomMetric defines custom metrics for auto-scaling
                      properties:
                        name:
                          description: Metric name
                          type: string
                        targetValue:
                          description: Target value
                          type: string
                        type:
                          description: Metric type (pods, object, external)
                          enum:
                          - pods
                          - object
                          - external
                          type: string
                      required:
                      - name
                      - targetValue
                      - type
                      type: object
                    type: array
                  enabled:
                    description: Enable auto-scaling
                    type: boolean
                  maxReplicas:
                    description: Maximum number of replicas
                    format: int32
                    minimum: 1
                    type: integer
                  memoryUtilization:
                    description: Memory utilization threshold for scaling
                    format: int32
                    maximum: 100
                    minimum: 1
                    type: integer
                  minReplicas:
                    description: Minimum number of replicas
                    format: int32
                    minimum: 1
                    type: integer
                required:
                - enabled
                - maxReplicas
                - minReplicas
                type: object
              backup:
                description: Backup configuration
                properties:
                  enabled:
                    description: Enable backup
                    type: boolean
                  retentionDays:
                    description: Retention policy in days
                    format: int32
                    maximum: 365
                    minimum: 1
                    type: integer
                  schedule:
                    description: Backup schedule (cron format)
                    type: string
                  storageLocation:
                    description: Backup storage location
                    type: string
                required:
                - enabled
                type: object
              cnfType:
                description: CNF type classification
                enum:
                - 5G-Core
                - O-RAN
                - Edge
                - Custom
                type: string
              configuration:
                description: Configuration parameters
                type: object
                x-kubernetes-preserve-unknown-fields: true
              deploymentStrategy:
                default: Helm
                description: Deployment strategy
                enum:
                - Helm
                - Operator
                - Direct
                - GitOps
                type: string
              function:
                description: Specific CNF function
                enum:
                - AMF
                - SMF
                - UPF
                - NRF
                - AUSF
                - UDM
                - PCF
                - NSSF
                - NEF
                - SMSF
                - BSF
                - UDR
                - UDSF
                - CHF
                - N3IWF
                - TNGF
                - TWIF
                - NWDAF
                - SCP
                - SEPP
                - O-DU
                - O-CU-CP
                - O-CU-UP
                - Near-RT-RIC
                - Non-RT-RIC
                - O-eNB
                - SMO
                - rApp
                - xApp
                - O-FH
                - O-M-P
                - UE-Simulator
                - Traffic-Generator
                type: string
              helm:
                description: Helm configuration (if using Helm strategy)
                properties:
                  chartName:
                    description: Chart name
                    type: string
                  chartVersion:
                    description: Chart version
                    type: string
                  releaseName:
                    description: Release name for the Helm deployment
                    type: string
                  repository:
                    description: Chart repository URL
                    pattern: ^https?://.*
                    type: string
                  values:
                    description: Values override the default chart values
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                required:
                - chartName
                - chartVersion
                - repository
                type: object
              monitoring:
                description: Monitoring configuration
                properties:
                  alertingRules:
                    description: Alerting rules
                    items:
                      type: string
                    type: array
                  customMetrics:
                    description: Custom metrics to collect
                    items:
                      type: string
                    type: array
                  enabled:
                    description: Enable monitoring
                    type: boolean
                  prometheus:
                    description: Prometheus scraping configuration
                    properties:
                      enabled:
                        description: Enable Prometheus scraping
                        type: boolean
                      interval:
                        default: 30s
                        description: Scraping interval
                        type: string
                      path:
                        default: /metrics
                        description: Scraping path
                        type: string
                      port:
                        default: 9090
                        description: Scraping port
                        format: int32
                        type: integer
                    required:
                    - enabled
                    type: object
                required:
                - enabled
                type: object
              networkSlice:
                description: Network slice identifier
                pattern: ^[0-9A-Fa-f]{6}-[0-9A-Fa-f]{6}$
                type: string
              operator:
                description: Operator configuration (if using Operator strategy)
                properties:
                  customResource:
                    description: Custom resource definition for the operator
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  name:
                    description: Operator name
                    type: string
                  namespace:
                    description: Operator namespace
                    type: string
                required:
                - customResource
                - name
                - namespace
                type: object
              replicas:
                default: 1
                description: Number of replicas
                format: int32
                maximum: 100
                minimum: 1
                type: integer
              resources:
                description: Resource requirements
                properties:
                  cpu:
                    anyOf:
                    - type: integer
                    - type: string
                    description: CPU resource requirements
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    type: object
                    x-kubernetes-int-or-string: true
                    x-kubernetes-preserve-unknown-fields: true
                  dpdk:
                    description: DPDK requirements for packet processing
                    properties:
                      cores:
                        description: Number of DPDK cores
                        format: int32
                        type: integer
                      driver:
                        description: DPDK driver
                        type: string
                      enabled:
                        description: Enable DPDK support
                        type: boolean
                      memory:
                        description: DPDK memory in MB
                        format: int32
                        type: integer
                    required:
                    - enabled
                    type: object
                  gpu:
                    description: GPU resource requirements
                    format: int32
                    type: integer
                  hugepages:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: Hugepages requirements for high-performance networking
                    type: object
                  maxCpu:
                    anyOf:
                    - type: integer
                    - type: string
                    description: Maximum CPU resource limit
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    type: object
                    x-kubernetes-int-or-string: true
                    x-kubernetes-preserve-unknown-fields: true
                  maxMemory:
                    anyOf:
                    - type: integer
                    - type: string
                    description: Maximum Memory resource limit
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    type: object
                    x-kubernetes-int-or-string: true
                    x-kubernetes-preserve-unknown-fields: true
                  memory:
                    anyOf:
                    - type: integer
                    - type: string
                    description: Memory resource requirements
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    type: object
                    x-kubernetes-int-or-string: true
                    x-kubernetes-preserve-unknown-fields: true
                  storage:
                    anyOf:
                    - type: integer
                    - type: string
                    description: Storage resource requirements
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    type: object
                    x-kubernetes-int-or-string: true
                    x-kubernetes-preserve-unknown-fields: true
                required:
                - cpu
                - memory
                type: object
              securityPolicies:
                description: Security policies
                items:
                  type: string
                type: array
              serviceMesh:
                description: Service mesh integration
                properties:
                  enabled:
                    description: Enable service mesh integration
                    type: boolean
                  mtls:
                    description: mTLS configuration
                    properties:
                      enabled:
                        description: Enable mTLS
                        type: boolean
                      mode:
                        description: mTLS mode (strict, permissive)
                        enum:
                        - strict
                        - permissive
                        type: string
                    required:
                    - enabled
                    type: object
                  trafficPolicies:
                    description: Traffic policies
                    items:
                      description: TrafficPolicy defines traffic routing policies
                      properties:
                        destination:
                          description: Destination service
                          type: string
                        loadBalancing:
                          description: Load balancing configuration
                          properties:
                            algorithm:
                              description: Load balancing algorithm
                              enum:
                              - round_robin
                              - least_conn
                              - random
                              - ip_hash
                              type: string
                            healthCheck:
                              description: Health check configuration
                              properties:
                                interval:
                                  description: Check interval in seconds
                                  format: int32
                                  maximum: 300
                                  minimum: 1
                                  type: integer
                                path:
                                  description: Path for HTTP health checks
                                  type: string
                                port:
                                  description: Port for health checks
                                  format: int32
                                  type: integer
                                retries:
                                  description: Number of retries
                                  format: int32
                                  maximum: 10
                                  minimum: 1
                                  type: integer
                                timeout:
                                  description: Timeout in seconds
                                  format: int32
                                  maximum: 60
                                  minimum: 1
                                  type: integer
                              required:
                              - interval
                              - path
                              - port
                              - retries
                              - timeout
                              type: object
                          required:
                          - algorithm
                          type: object
                        name:
                          description: Policy name
                          type: string
                        source:
                          description: Source service
                          type: string
                      required:
                      - destination
                      - name
                      - source
                      type: object
                    type: array
                  type:
                    description: Service mesh type (Istio, Linkerd, Consul Connect)
                    enum:
                    - Istio
                    - Linkerd
                    - Consul
                    type: string
                required:
                - enabled
                type: object
              targetCluster:
                description: Target cluster for deployment
                type: string
              targetNamespace:
                description: Target namespace for deployment
                maxLength: 63
                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                type: string
            required:
            - cnfType
            - deploymentStrategy
            - function
            - replicas
            - resources
            type: object
          status:
            description: CNFDeploymentStatus defines the observed state of CNFDeployment
            properties:
              availableReplicas:
                description: Available replicas count
                format: int32
                type: integer
              conditions:
                description: Conditions represent the latest available observations
                  of the deployment's state
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: 'lastTransitionTime is the last time the condition
                        transitioned from one status to another.

                        This should be when the underlying condition changed.  If
                        that is not known, then using the time when the API field
                        changed is acceptable.'
                      format: date-time
                      type: string
                    message:
                      description: 'message is a human readable message indicating
                        details about the transition.

                        This may be an empty string.'
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: 'observedGeneration represents the .metadata.generation
                        that the condition was set based upon.

                        For instance, if .metadata.generation is currently 12, but
                        the .status.conditions[x].observedGeneration is 9, the condition
                        is out of date

                        with respect to the current state of the instance.'
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: 'reason contains a programmatic identifier indicating
                        the reason for the condition''s last transition.

                        Producers of specific condition types may define expected
                        values and meanings for this field,

                        and whether the values are considered a guaranteed API.

                        The value should be a CamelCase string.

                        This field may not be empty.'
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - 'True'
                      - 'False'
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              deploymentStartTime:
                description: Deployment start time
                format: date-time
                type: string
              health:
                description: Health status
                properties:
                  details:
                    additionalProperties:
                      type: string
                    description: Health check details
                    type: object
                  lastCheckTime:
                    description: Last health check time
                    format: date-time
                    type: string
                  status:
                    description: Overall health status
                    enum:
                    - Healthy
                    - Degraded
                    - Unhealthy
                    - Unknown
                    type: string
                required:
                - status
                type: object
              helmRelease:
                description: Deployed Helm release name
                type: string
              lastUpdatedTime:
                description: Last updated time
                format: date-time
                type: string
              observedGeneration:
                description: Observed generation
                format: int64
                type: integer
              phase:
                description: Phase represents the current deployment phase
                enum:
                - Pending
                - Deploying
                - Running
                - Scaling
                - Upgrading
                - Failed
                - Terminating
                type: string
              readyReplicas:
                description: Ready replicas count
                format: int32
                type: integer
              resourceUtilization:
                additionalProperties:
                  type: string
                description: Resource utilization metrics
                type: object
              serviceEndpoints:
                description: Service endpoints
                items:
                  description: ServiceEndpoint defines service endpoint information
                  properties:
                    clusterIP:
                      description: Cluster IP
                      type: string
                    externalIP:
                      description: External IP (for LoadBalancer services)
                      type: string
                    name:
                      description: Service name
                      type: string
                    ports:
                      description: Ports
                      items:
                        description: ServicePort defines service port information
                        properties:
                          name:
                            description: Port name
                            type: string
                          port:
                            description: Port number
                            format: int32
                            type: integer
                          protocol:
                            description: Protocol
                            type: string
                          targetPort:
                            description: Target port
                            type: string
                        required:
                        - name
                        - port
                        - protocol
                        - targetPort
                        type: object
                      type: array
                    type:
                      description: Service type
                      type: string
                  required:
                  - name
                  - ports
                  - type
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      scale:
        specReplicasPath: .spec.replicas
        statusReplicasPath: .status.readyReplicas
      status:
        type: object
        x-kubernetes-preserve-unknown-fields: true
