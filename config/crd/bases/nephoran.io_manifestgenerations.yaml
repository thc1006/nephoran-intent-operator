---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.19.0
  name: manifestgenerations.nephoran.io
spec:
  group: nephoran.io
  names:
    kind: ManifestGeneration
    listKind: ManifestGenerationList
    plural: manifestgenerations
    singular: manifestgeneration
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            properties:
              generationOptions:
                properties:
                  annotations:
                    additionalProperties:
                      type: string
                    type: object
                  generateHealthChecks:
                    default: true
                    type: boolean
                  generateMonitoring:
                    default: true
                    type: boolean
                  includeNamespaces:
                    default: true
                    type: boolean
                  includeNetworkPolicies:
                    default: false
                    type: boolean
                  includePodSecurityPolicies:
                    default: false
                    type: boolean
                  includeRBAC:
                    default: true
                    type: boolean
                  labels:
                    additionalProperties:
                      type: string
                    type: object
                  resourceNaming:
                    properties:
                      includeComponent:
                        default: true
                        type: boolean
                      includeIntentName:
                        default: true
                        type: boolean
                      maxLength:
                        default: 63
                        type: integer
                      prefix:
                        type: string
                      suffix:
                        type: string
                    type: object
                type: object
              namespaceTemplate:
                properties:
                  annotations:
                    additionalProperties:
                      type: string
                    type: object
                  labels:
                    additionalProperties:
                      type: string
                    type: object
                  nameTemplate:
                    type: string
                  networkPolicy:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  resourceQuota:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              optimizeManifests:
                default: true
                type: boolean
              outputFormat:
                enum:
                - yaml
                - json
                type: string
              parentIntentRef:
                description: ObjectReference represents a reference to a Kubernetes
                  object
                properties:
                  apiVersion:
                    description: API version of the referent
                    type: string
                  kind:
                    description: Kind of the referent
                    type: string
                  name:
                    description: Name of the referent
                    type: string
                  namespace:
                    description: Namespace of the referent
                    type: string
                  uid:
                    description: UID of the referent
                    type: string
                type: object
              priority:
                default: medium
                description: Priority defines processing priority levels
                type: string
              resourcePlanInput:
                type: object
                x-kubernetes-preserve-unknown-fields: true
              resourcePlanRef:
                description: ObjectReference represents a reference to a Kubernetes
                  object
                properties:
                  apiVersion:
                    description: API version of the referent
                    type: string
                  kind:
                    description: Kind of the referent
                    type: string
                  name:
                    description: Name of the referent
                    type: string
                  namespace:
                    description: Namespace of the referent
                    type: string
                  uid:
                    description: UID of the referent
                    type: string
                type: object
              securityContext:
                properties:
                  addCapabilities:
                    items:
                      type: string
                    type: array
                  allowPrivilegeEscalation:
                    default: false
                    type: boolean
                  dropCapabilities:
                    items:
                      type: string
                    type: array
                  readOnlyRootFilesystem:
                    default: true
                    type: boolean
                  runAsNonRoot:
                    default: true
                    type: boolean
                  seLinuxOptions:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  seccompProfile:
                    type: string
                type: object
              templateEngine:
                default: helm
                type: string
              templateSource:
                properties:
                  builtinTemplates:
                    items:
                      type: string
                    type: array
                  configMapSource:
                    properties:
                      keys:
                        items:
                          type: string
                        type: array
                      name:
                        type: string
                      namespace:
                        type: string
                    required:
                    - name
                    type: object
                  gitSource:
                    properties:
                      branch:
                        default: main
                        type: string
                      path:
                        default: ""
                        type: string
                      secretRef:
                        properties:
                          key:
                            type: string
                          name:
                            type: string
                          namespace:
                            type: string
                        required:
                        - name
                        type: object
                      tag:
                        type: string
                      url:
                        type: string
                    required:
                    - url
                    type: object
                  helmSource:
                    properties:
                      chart:
                        type: string
                      repository:
                        type: string
                      secretRef:
                        properties:
                          key:
                            type: string
                          name:
                            type: string
                          namespace:
                            type: string
                        required:
                        - name
                        type: object
                      values:
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                      version:
                        type: string
                    required:
                    - chart
                    - repository
                    type: object
                  ociSource:
                    properties:
                      registry:
                        type: string
                      repository:
                        type: string
                      secretRef:
                        properties:
                          key:
                            type: string
                          name:
                            type: string
                          namespace:
                            type: string
                        required:
                        - name
                        type: object
                      tag:
                        default: latest
                        type: string
                    required:
                    - registry
                    - repository
                    type: object
                  type:
                    enum:
                    - git
                    - helm
                    - oci
                    - configmap
                    - builtin
                    type: string
                required:
                - type
                type: object
              validateManifests:
                default: true
                type: boolean
            required:
            - parentIntentRef
            - resourcePlanInput
            type: object
          status:
            properties:
              conditions:
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-type: atomic
              generatedManifests:
                additionalProperties:
                  type: string
                type: object
              generationCompletionTime:
                format: date-time
                type: string
              generationDuration:
                type: string
              generationStartTime:
                format: date-time
                type: string
              manifestSummary:
                properties:
                  generatedNamespaces:
                    items:
                      type: string
                    type: array
                  manifestsByComponent:
                    additionalProperties:
                      format: int32
                      type: integer
                    type: object
                  manifestsByNamespace:
                    additionalProperties:
                      format: int32
                      type: integer
                    type: object
                  manifestsByType:
                    additionalProperties:
                      format: int32
                      type: integer
                    type: object
                  totalManifests:
                    format: int32
                    type: integer
                  totalSize:
                    format: int64
                    type: integer
                required:
                - manifestsByType
                - totalManifests
                type: object
              observedGeneration:
                format: int64
                type: integer
              optimizationResults:
                items:
                  properties:
                    applied:
                      type: boolean
                    changes:
                      items:
                        type: string
                      type: array
                    description:
                      type: string
                    improvementPercent:
                      pattern: ^([0-9]|[1-9][0-9]|100)(\.\d+)?$
                      type: string
                    manifestName:
                      type: string
                    optimizationType:
                      type: string
                    optimizedAt:
                      format: date-time
                      type: string
                  required:
                  - applied
                  - manifestName
                  - optimizationType
                  - optimizedAt
                  type: object
                type: array
              phase:
                type: string
              qualityScore:
                pattern: ^(0(\.\d+)?|1(\.0+)?)$
                type: string
              resourceReferences:
                items:
                  properties:
                    apiVersion:
                      type: string
                    component:
                      type: string
                    dependencies:
                      items:
                        type: string
                      type: array
                    kind:
                      type: string
                    manifestFile:
                      type: string
                    name:
                      type: string
                    namespace:
                      type: string
                  required:
                  - apiVersion
                  - kind
                  - name
                  type: object
                type: array
              retryCount:
                format: int32
                type: integer
              securityAnalysis:
                properties:
                  analyzedAt:
                    format: date-time
                    type: string
                  complianceResults:
                    items:
                      properties:
                        compliant:
                          type: boolean
                        score:
                          pattern: ^(0(\.\d+)?|1(\.0+)?)$
                          type: string
                        standard:
                          type: string
                        version:
                          type: string
                        violations:
                          items:
                            type: string
                          type: array
                      required:
                      - compliant
                      - standard
                      type: object
                    type: array
                  overallScore:
                    pattern: ^(0(\.\d+)?|1(\.0+)?)$
                    type: string
                  recommendations:
                    items:
                      type: string
                    type: array
                  securityIssues:
                    items:
                      properties:
                        affectedManifests:
                          items:
                            type: string
                          type: array
                        cvssScore:
                          pattern: ^([0-9]|10)(\.\d+)?$
                          type: string
                        description:
                          type: string
                        remediation:
                          type: string
                        severity:
                          type: string
                        type:
                          type: string
                      required:
                      - description
                      - severity
                      - type
                      type: object
                    type: array
                required:
                - analyzedAt
                - overallScore
                type: object
              templateInfo:
                properties:
                  engine:
                    type: string
                  source:
                    properties:
                      builtinTemplates:
                        items:
                          type: string
                        type: array
                      configMapSource:
                        properties:
                          keys:
                            items:
                              type: string
                            type: array
                          name:
                            type: string
                          namespace:
                            type: string
                        required:
                        - name
                        type: object
                      gitSource:
                        properties:
                          branch:
                            default: main
                            type: string
                          path:
                            default: ""
                            type: string
                          secretRef:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              namespace:
                                type: string
                            required:
                            - name
                            type: object
                          tag:
                            type: string
                          url:
                            type: string
                        required:
                        - url
                        type: object
                      helmSource:
                        properties:
                          chart:
                            type: string
                          repository:
                            type: string
                          secretRef:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              namespace:
                                type: string
                            required:
                            - name
                            type: object
                          values:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                          version:
                            type: string
                        required:
                        - chart
                        - repository
                        type: object
                      ociSource:
                        properties:
                          registry:
                            type: string
                          repository:
                            type: string
                          secretRef:
                            properties:
                              key:
                                type: string
                              name:
                                type: string
                              namespace:
                                type: string
                            required:
                            - name
                            type: object
                          tag:
                            default: latest
                            type: string
                        required:
                        - registry
                        - repository
                        type: object
                      type:
                        enum:
                        - git
                        - helm
                        - oci
                        - configmap
                        - builtin
                        type: string
                    required:
                    - type
                    type: object
                  templateVersion:
                    type: string
                  templatesUsed:
                    items:
                      type: string
                    type: array
                  variables:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                required:
                - engine
                - source
                type: object
              validationResults:
                items:
                  properties:
                    errors:
                      items:
                        type: string
                      type: array
                    manifestName:
                      type: string
                    manifestType:
                      type: string
                    valid:
                      type: boolean
                    validatedAt:
                      format: date-time
                      type: string
                    validationRules:
                      items:
                        type: string
                      type: array
                    warnings:
                      items:
                        type: string
                      type: array
                  required:
                  - manifestName
                  - manifestType
                  - valid
                  - validatedAt
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
