apiVersion: v1
kind: ServiceAccount
metadata:
  name: nephoran-operator-controller-manager
  namespace: nephoran-system
  labels:
    app.kubernetes.io/name: nephoran-intent-operator
    app.kubernetes.io/component: rbac
    app.kubernetes.io/managed-by: kustomize
  annotations:
    # Enable token auto-mounting for secure token management
    serviceaccount.annotations.kubernetes.io/token-auto-mount: "true"
automountServiceAccountToken: true

---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: nephoran-webhook-manager
  namespace: nephoran-system
  labels:
    app.kubernetes.io/name: nephoran-intent-operator
    app.kubernetes.io/component: webhook
    app.kubernetes.io/managed-by: kustomize
  annotations:
    serviceaccount.annotations.kubernetes.io/token-auto-mount: "true"
automountServiceAccountToken: true

---
# ServiceAccount for worker pods that execute CNF deployments
apiVersion: v1
kind: ServiceAccount
metadata:
  name: nephoran-cnf-deployer
  namespace: nephoran-system
  labels:
    app.kubernetes.io/name: nephoran-intent-operator
    app.kubernetes.io/component: cnf-deployer
    app.kubernetes.io/managed-by: kustomize
automountServiceAccountToken: true

---
# Limited ServiceAccount for monitoring and metrics
apiVersion: v1
kind: ServiceAccount
metadata:
  name: nephoran-metrics-reader
  namespace: nephoran-system
  labels:
    app.kubernetes.io/name: nephoran-intent-operator
    app.kubernetes.io/component: monitoring
    app.kubernetes.io/managed-by: kustomize
automountServiceAccountToken: false