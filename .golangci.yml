# golangci-lint config optimized for ULTRA SPEED MODE (2025)
# Comprehensive linting with performance optimizations for CI/CD

run:
  timeout: 8m
  go: '1.24'
  issues-exit-code: 1
  tests: true
  modules-download-mode: readonly
  allow-parallel-runners: true
  build-tags:
    - netgo
    - osusergo
    - static_build

linters:
  # Ultra-fast linter configuration for CI speed (2025 optimized)
  disable-all: true
  enable:
    - govet       # Essential static analysis
    - staticcheck # Fast and comprehensive
    - errcheck    # Error handling validation
    - revive      # Fast Go linting
    - gofmt       # Formatting check (fast)
    - ineffassign # Dead code detection (fast)
    - misspell    # Spelling errors (fast)
    - unused      # Detect unused variables/functions
    - typecheck   # Type checking
    - gosimple    # Simplification suggestions

linters-settings:
  revive:
    # Ultra-fast ruleset optimized for CI speed
    severity: warning
    confidence: 0.8
    rules:
      - name: blank-imports
      - name: context-as-argument
      - name: exported
        arguments: ["disableStutteringCheck"]
      - name: receiver-naming
      - name: increment-decrement
  
  # Optimize staticcheck for speed
  staticcheck:
    checks: ["all", "-SA1019"]  # Skip deprecated warnings for speed
  
  # Fast govet configuration
  govet:
    enable-all: false
    enable:
      - assign
      - atomic
      - bools
      - buildtag
      - nilfunc
      - printf

# All issue-related filters and exclusions live under "issues"
issues:
  # Don't limit counts while we're stabilizing the codebase
  max-issues-per-linter: 0
  max-same-issues: 0
  
  # Use default exclude patterns (vendor, third_party, etc.)
  exclude-use-default: true
  
  # Additional directories to exclude from linting
  exclude-dirs:
    - _examples
    - tools
    - testdata
    - vendor
    - .git
    - bin
    - deployments
  
  # Files to exclude from linting
  exclude-files:
    - ".*\\.pb\\.go$"
    - ".*_generated\\.go$"
    - "zz_generated.*.go$"

  # Use exclude-rules instead of deprecated exclusions
  exclude-rules:
    # Exclude generated files
    - path: "_generated\\.go$"
      linters:
        - all
    # Exclude vendor directory
    - path: "^vendor/"
      linters:
        - all
    # Exclude docs, examples, deployments, testdata, _examples, tools
    - path: "^(docs|examples|deployments|testdata|_examples|tools)/"
      linters:
        - all
    # Allow some patterns in tests
    - path: _test\.go
      linters:
        - errcheck
        - gosec

# Output format for golangci-lint
output:
  formats:
    - format: colored-line-number
  print-issued-lines: true
  print-linter-name: true