# golangci-lint config (v2). This file is designed to pass in CI for MVP.
# It uses the new schema/keys so config verification won't fail.
# Ref: https://golangci-lint.run/docs/configuration/file/

version: "2"

run:
  # Total timeout for the whole run.
  timeout: 5m
  # Make paths relative to go.mod so filters work the same locally/CI.
  relative-path-mode: gomod
  # Avoid modifying go.mod/go.sum during lint.
  modules-download-mode: readonly
  # ğŸš¦ IMPORTANT: do not fail CI because of linter findings during MVP.
  # 0 means: exit code 0 even if issues are found.
  issues-exit-code: 0
  # Keep tests included (some linters look at *_test.go).
  tests: true
  # Allow multiple runners on CI to reduce flakiness.
  allow-parallel-runners: true
  allow-serial-runners: true

linters:
  # Start minimal: enable a few safe/default linters.
  # You can add more later without breaking CI.
  default: none
  enable:
    - govet
    - staticcheck
    - errcheck
    - revive

linters-settings:
  revive:
    # A gentle ruleset; strict ones can be added later.
    severity: warning
    rules:
      - name: blank-imports
      - name: context-as-argument
      - name: exported
        arguments: ["disableStutteringCheck"]
      - name: receiver-naming
      - name: increment-decrement

# All issue-related filters and exclusions live under "issues" in v2.
issues:
  # Only flag problems introduced in this branch by default.
  # ï¼ˆåœ¨å¤§å‹æ—¢æœ‰å°ˆæ¡ˆä¸­éå¸¸å¥½ç”¨ï¼Œä¸æœƒä¸€æ¬¡ç‚¸å‡ºæ­·å²å‚µï¼‰
  new: false
  # å¦‚æœè¦åªçœ‹ PR ç›¸å°æ–¼ integrate/mvp çš„æ–°å•é¡Œï¼Œå¯æŠŠä¸Šé¢æ”¹å› trueï¼Œ
  # ä¸¦è¨­ new-from-merge-base: integrate/mvp
  # new-from-merge-base: integrate/mvp

  # Donâ€™t limit counts while weâ€™re stabilizing the codebase.
  max-issues-per-linter: 0
  max-same-issues: 0
  uniq-by-line: true

  # v2ï¼šè«‹ç”¨ exclusions/paths ä¾†å–ä»£ run.skip-files / run.skip-dirs
  exclusions:
    generated: lax
    warn-unused: true
    # é‡å°ç‰¹å®šè¨Šæ¯æˆ–ç‰¹å®š linter çš„ä¾‹å¤–å¯åœ¨é€™è£¡æ–°å¢ rules
    rules: []

  # é€™äº› path ä»æœƒè¢«åˆ†æï¼Œä½†ä¸æœƒå›å ± issueï¼ˆå–ä»£èˆŠ skip-*ï¼‰
  # ä½¿ç”¨ç›¸å° go.mod çš„è·¯å¾‘ï¼›Windows/CI çš†é©ç”¨ï¼ˆ/ æœƒè‡ªå‹•æ›æˆç³»çµ±åˆ†éš”ç¬¦ï¼‰
  paths:
    - "^docs/.*"
    - "^examples/.*"
    - "^deployments/.*"
    - "^testdata/.*"
    - "^vendor/.*"
  # è‹¥è¦å–æ¶ˆå‰è¿°æŸäº›æ’é™¤ï¼Œå¯æ”¾åœ¨ paths-except
  paths-except: []

# Optional: æœªä¾†è‹¥ä½ è¦è¼¸å‡º JUnit/SARIF å ±å‘Šï¼Œå¯åœ¨é€™è£¡åŠ ä¸Šã€‚
output:
  # é è¨­ text è¼¸å‡ºå³å¯ï¼›CI Action æœƒè½‰æˆ annotationã€‚
  formats:
    text:
      path: stdout
